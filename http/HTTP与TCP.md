# 浏览器`HTTP`请求并发数与`TCP`的关系

面试题目（头条）

> 1. 网页中的图片资源为什么分开放在不同的域名下
> 2. 浏览器与服务器建立一个 TCP 链接之后，是否会在完成一个 HTTP 请求之后断开，什么条件下会断开
> 3. 一个 TCP 链接可以同时发生几个 HTTP 请求
> 4. 浏览器 HTTP 请求的并发性是如何体现的，并发请求的数量有没有限制



### 网页中的图片资源为什么分开放在不同的域名下？

1. 减少 `cookie`的发送，由于浏览器对于同一个域名下的请求会默认发送 `cookie`，而静态资源不需要使用`cookie`，会加大传输内容，减少传输速率
2. 浏览器的并发请求数量限制是针对同一个域名下，使用不同的域名可以增加同一时间并发请求数量



### 浏览器与服务器建立一个 TCP 链接之后，是否会在完成一个 HTTP 请求之后断开，什么条件下会断开

1. 在`HTTP/1.0`中，一个`HTTP`请求在收到服务器的响应之后，会断开相应的`TCP`链接。这样每次发送数据，都需要进行重复的`TCP`连接与断开的过程
2. 为了充分利用`TCP`链接，在`HTTP/1.1`中使用了`Connection: keep-alive`来进行复用，在`HTTP`请求完成之后，不会断开当前`TCP`链接
3. `Connection: keep-alive`为默认值，将其设置为`Connetion: close`会在请求之后关闭`TCP`链接



###  一个 TCP 链接可以同时发生几个 HTTP 请求

1. 在`HTTP/1.1`中，单个的`TCP`链接，在同一个时间只能处理一个`TCP`请求（`TCP`链接可以复用，但是同一个时间只能发送一个请求）
2. 在`HTTP/2`中，提供了多路复用技术，多个`HTTP`请求，可以同时在一个`TCP`链接中进行传输



### 浏览器 HTTP 请求的并发性是如何体现的，并发请求的数量有没有限制

- 页面请求资源，浏览器可以并发的向服务器建立多个`TCP`链接，在`TCP`链接上处理多个请求

- `chrome`浏览器最多同时允许对**同一个域名**建立**6**个`TCP`链接





参考

- [第8题-浏览器HTTP请求并发数和TCP连接的关系](https://juejin.im/post/5d59ffe46fb9a06ad0056ddf)





