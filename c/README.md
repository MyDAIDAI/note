`C`语言学习笔记

`c`语言会进行编译以及链接之后生成可执行文件，直接运行该文件即可

- 编译：
- 链接：
- 命令：`cc first.cc -o first.out`

## 数据

数据类型关键字

```c
int long short unsigned char float double
signed void
_Bool _Complex _Imaginary
```

计算机的存储方式可分为两大基本类型：**整数类型**和**浮点数类型**

> 位、字节和字
>
> 位、字节和字是描述计算机数据单元或存储单元的术语
>
> 最小的存储单元是位(bit)，可以存储0或1
>
> 字节(byte)是常用的计算机存储单位，对于几乎所有的机器，1字节均为8位，那么8位就有256种可能的0、1的组合。通过二进制编码，便可表示0 ~ 255 的整数或一组字符
>
> 字(word)是设计计算机时给定的自然存储单位



### 整数和浮点数

对于计算机而言，整数类型与浮点数类型的区别是存储方式不同

##### 整数

计算机以二进制数字存储整数，例如，整数7以二进制存储为111

##### 浮点数

在一个值后面加上一个小数点，该值就成为一个浮点值。所以7是整数，7.0是浮点数

计算机把浮点数分成小数部分和指数部分来表示，而且分开存储这两部分。因此，虽然7.00和7在数值上相同，但是它们的存储方式不同



区别：

- 整数没有小数部分，浮点数有小数部分
- 浮点数可以表示的范围比整数大
- 对于一些算术运算（两个很大的树相加或相减），浮点数损失的精度更多
- 因为在任何的区间内都存在无穷多个实数，所以计算机的浮点数不能表示区间内所有的值。浮点数通常只是实际值的近似值。例如，7.0可能被存储为浮点值6.99999

## C语言基本数据类型

### int类型

`int`类型是有符号整型，即`int`类型的值必须是整数，可以是正整数、负整数或零。其取值范围依计算机系统而异。一般而言，存储一个`int`要占一个机器字长。一般而言，系统用一个特殊位的值表示有符号整数的正负号

`%d`指明了在一行中打印整数的位置，`%d`称为转换说明，它指定了`printf()`应使用什么格式来显示一个值。如果`%d`后面没有对应的变量，那么会打印出内存中的任意值

```c
#include <stdio.h>
int main(void) {
  int ten = 10;
  int two = 2;
  printf("%d minus %d is %d\n", ten, 2, ten - two);
  printf("%d minus %d is %d\n", ten);
}
```

上面的代码打印结果为

```
10 minus 2 is 8
10 minus 0 is 821035111 // 打印内存中的任意值
```

##### 八进制与十六进制

- 在C语言中，用特定的前缀表示使用哪种进制，`0x`或`0X`前缀表示十六进制，`0`表示八进制
- 使用不同的进制数是为了方便，不会影响数被存储的方式。也就是说，无论把数字写成16，020或0x10，存储该数的方式都**相同**，因为计算机内部都以二进制进行编码
- 显示不同的进制数，`%d %o %x`, 显示前缀`%#o %#x %#X`



### 其他整数类型

`C`语言提供3个附属关键字修饰基本整数类型：`short`、`long`、`unsigned`

- `short int `（`short`）占用的存储空间**可能**比`int`类型少，常用于较小数值的场合以节省空间，与`int`类似，`short`是有符号类型
- `ling int`(`long`)占用的存储空间**可能**比`int`多，适用于较大数值的场合，有符号类型
- `long long int`(`long long`)占用的存储空间**可能**比`long`多，适用于更大数值的场合，该类型至少占64位，有符号
- `unsigned int`(`unsigned`)只适用于非负值的场合，该类型与有符号类型表示的范围不同，16位无符号允许的范围是`0 ~ 65535`, 有符号是`-32768 ~ 32767`。用于表示正负号的位现在用于表示另一个二进制位，所以**无符号**整型可以表示更大的数

##### 使用多种整数类型的原因

为什么上面对于不同的整数类型的存储空间都是用的**可能**呢？因为C语言只规定了`short`占用的存储空间不多于`int`，`long`占用的存储空间不能少于`int`。这样的规定是为了适应不同的机器

现在的个人计算机上最常见的设置是`long long`占64位，`long`占32位，`short`占16位，`int`占16位或者32位（依据计算机的自然字长而定）。原则上，这4中类型代表4种不同的大小，但是在实际使用中，有些类型之间通常有**重叠**

##### 如何选择

- 首选，考虑`unsigned`类型，这种类型的数常用于计数，因为计数不用负数。而且`unsigned`类型可以表示更大的数
- 如果一个数超出了`int`类型的取值范围，且在`long`类型的取值范围内，使用`long`类型（可能会减慢运算速度，非必要不使用）
- 如果在`long`类型和`int`类型占用空间相同的机器上编写代码，当确实需要32位整数时，应该使用`long`类型而不是`int`类型，以便程序移植到16位机之后仍然可以使用
- 如果在`int`设置为32的系统中要使用16位的值，应使用`short`类型以节约存储空间。通常只有当程序使用相对于系统可用内存较大的整型数组时，才需要重点考虑节省空间的问题

##### 整数溢出

如果整数超过了相应类型的取值范围会怎么样?

```c
#include <stdio.h>
int main(void) {
    int i = 2147483647;
    unsigned int j = 4294967295;
    printf("%d %d %d\n", i, i + 1, i + 2);
    printf("%u %u %u\n", j, j + 1, j + 2);
}
```

上面代码的输出为

```
2147483647 -2147483648 -2147483647
4294967295 0 1
```

- 对于无符号的整数，当达到它能表示的最大值时，会重新从起点开始
-  对于有符号的整数，会从最小值开始
