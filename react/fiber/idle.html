<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>idle html</title>
</head>
<body>
 <script>
   function sleep(delay) {}
   const works = [
     () => {
       console.log('task 1 start');
       sleep(0)
       console.log('task 1 end');
     },() => {
       console.log('task 2 start');
       sleep(0)
       console.log('task 2 end');
     },() => {
       console.log('task 3 start');
       sleep(0)
       console.log('task 3 end');
     }
   ]
   window.requestIdleCallback(workLoop);
   function workLoop(deadline) {
     while (deadline.timeRemaining > 0 && works.length > 0) {
       // perform
     }
     console.log(`本帧剩余时间为 ${parseInt(deadline.timeRemaining())}`)
   }
 </script>
</body>
</html>
