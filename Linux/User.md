# 用户身份与文件权限

## 用户身份
- 管理员`UID`为`0`: 系统的管理员用户
- 系统用户`UID`为`1~999`: `Linux`系统为了避免因某个服务程序出现漏洞而被黑客提权至整个服务器，默认服务程序会有独立的系统用户负责运行，进而有效控制被破坏范围
- 普通用户`UID`从`1000`开始: 由管理员创建的用于维护日常工作的用户

`UID`是不能冲突的，由管理员创建的普通用户的`UID`默认是从`1000`开始的

用户组：
可以把多个用户加入到同一个组中，从而方便为组中的用户统一规划权限或者指定任务，在系统中创建每个用户时，将自动创建一个与其同名的基本用户组，且这个基本用户组只有该用户一个人。如果用户以后被纳入其他用户组，则这个其他用户组称之为扩展用户组

一个用户只有一个基本用户组，但是可以有多个扩展用户组

### `useradd`
创建新的用户，格式为`useradd [选项] 用户名`
- `-d`: 指定用户的主目录
- `-e`: 指定账户的到期时间，格式为`YYYY-MM-DD`
- `-u`: 指定该用户的默认`UID`
- `-g`: 指定一个初始的用户基本组（必须已存在）
- `-G`: 指定一个或者多个扩展用户组
- `-N`: 不创建与用户同名的基本用户组
- `-s`: 指定该用户的默认`shell`解释器
  
```
useradd -d /home/dp -u 8888 -s /sbin/nologin nologinUser
id nologinUser
uid=8888(nologinUser) gid=8888(nologinUser) 组=8888(nologinUser)
```

### `groupadd`命令
用于创建用户组，格式为`groupadd [选项] 群组名`

### `usermod`命令
用于修改用户的属性，格式为`usermod [选项] 用户名`
- `-c`: 填写用户账户的备注信息
- `-d -m`: 参数`-m`与`-d`连用，可重新指定用户的主目录并自动把旧的数据转移过去
- `-e`: 账户的到期时间，格式为`YYYY-MM-DD`
- `-g`: 变更所属用户组
- `-G`: 变更扩展用户组
- `-L`: 锁定用户禁止其登录系统
- `-U`: 解锁用户，允许其登录系统
- `-s`: 变更默认终端
- `-u`: 修改用户的`UID`

### `passwd`命令
用于修改用户密码，过期时间，认证信息等，格式为`passwd [选项] [用户名]`

普通用户只能使用`passwd`命令修改自身的系统密码，而`root`管理员则有权限修改其他所有人的密码，并且`root`修改自己以及其他人的密码时不需要验证旧密码

- `-l`: 锁定用户，禁止其登录
- `-u`: 解除锁定，允许用户登录
- `--stdin`: 允许通过标准输入修改用户密码，如`echo "newpassword" | passwd --stdin username`
- `-d`: 使该用户可用空密码登录系统
- `-e`: 强制用户在下次登录时修改密码
- `-S`: 显示用户的密码是否被锁定，以及密码所采用的加密算法名称

### `userdel`命令
`userdel`命令用于删除用户，格式为`userdel [选项] 用户名`
- `-f`: 强制删除用户
- `-r`: 同时删除用户以及用户的主目录