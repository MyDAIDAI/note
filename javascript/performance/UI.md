# 快速响应的用户界面

大多数浏览器让一个单线程共用与执行`javaScript`代码和更新用户界面。每个时刻只能执行其中一种操作，这意味着当`javaScript`代码正在执行时用户界面无法响应。所以管理好`javaScript`的运行时间对`web`应用的性能非常重要

## 浏览器的ui线程
用于执行`javaScript`和更新用户界面的进程通常被称为“浏览器UI线程”。UI线程的工作基于一个简单的队列系统，任务会被保存到**队列**中直到进程空闲，一旦空闲，队列中的下一个任务就被重新提取出来并运行

#### 浏览器限制
浏览器限制了`javaScript`任务的运行时间，这种限制是有必要的，它确保某些恶意代码不能通过永不停止的密集操作锁住用户的浏览器或计算机。此类限制有以下两种
- 调用栈大小限制
- 长时间运行限制

单个`javaScipt`操作花费的总时间（最大值）不应该超过200毫秒

### 使用定时器让出时间判断
有时难免会有一些复杂的`js`任务不能在100ms或更短的时间内完成，这个时候，最理想的办法就是让出UI线程的控制权，使得UI可以更新。让出控制权意味着停止执行`js`，使UI线程有机会更新，然后再继续执行`js`